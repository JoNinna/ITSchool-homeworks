Linux Core


Comenzi Utile

Clonati acest document. ÃŽn box-urile goale completati cu rezolvarile voastre (comenzi folosite). Dati apoi share la document si trimiteti-l pe discord in mesaj direct (nu pe grup).

Exercitiul 1: Useri si permisiuni

Cerinta 1: AveÈ›i o echipa formatÄƒ din 3 membrii: alice, bob si charlie. 
Creati acesti 3 useri. DaÈ›i switch la fiecare user si verificati ca a fost creat cu success.
Am creat un script de bash adduser.sh care creaza userii pe baza comenzii sudo adduser $user 
Dupa am rular chmod +x adduser.sh si ./adduser.sh
Dat fiind ca parola noilor utilizatori este null, am rulat sudo su pentru ca mai apoi sa ma loghez pe noii useri fara a avea nevoie de parola prin su - user

Cerinta 2: ÃŽn echipa avem 2 roluri: developer si tester. 
Creati 2 grupuri numite â€œdevelopersâ€ si â€œtestersâ€.
sudo groupadd developer
sudo groupadd tester
# Mai exista si comanda addgroup care face cam acelasi lucuru
ÃŽn grupul de developers ii avem pe alice si pe bob iar in grupul testers pe bob si charlie (bob este in 2 grupuri).
sudo usermod -aG developer alice
sudo usermod -aG developer bob
sudo usermod -aG tester bob
sudo usermod -aG tester charlie 
Verificati pentru fiecare user cÄƒ este Ã®n grupurile corecte folosind comanda id sau groups.
ninna@ninna-QEMU-Virtual-Machine:~/work/ITSchool-homeworks/Linux-HW1$ groups alice 
alice : alice users developer
ninna@ninna-QEMU-Virtual-Machine:~/work/ITSchool-homeworks/Linux-HW1$ groups bob
bob : bob users developer tester
ninna@ninna-QEMU-Virtual-Machine:~/work/ITSchool-homeworks/Linux-HW1$ groups charlie
charlie : charlie users tester
sau folosind comanda cat /etc/group

Cerinta 3: Fiecare role poate accesa doar anumite directoare ale proiectului.
CreaÈ›i 2 directoare numite /developers si /testers in radacina sistemului de fisiere. 
mkdir /developers si mkdir /testers
ÃŽn fiecare director pot scrie doar userii grupului respectiv, dar poate citi È™i executa oricine. 
Verificati permisiunile directoarelor folosind comanda ls.  
sudo chown :developer developers/
sudo chown :tester testers/
sudo chmod 775 developers/
sudo chmod 775 testers/

Cerinta 4: Dati switch la userul alice si creati un fisier cu numele script.sh in directorul /developers. 
In script puneti: echo "Salut"
Dati permisiuni de execuÈ›ie pentru toata lumea pe acest fiÈ™ier, dar de modificare doar pentru grupul developers.
Verificati ca toÈ›i userii pot executa acest fiÈ™ier, dar doar useri din grupul developers Ã®l pot modifica.
chmod 575 script.sh

Cerinta 5: ÃŽn timp membrii celor 2 echipe au fost comansati Ã®ntr-o singura echipa numita â€œtechâ€.
Creati un nou group numit â€œtechâ€.
sudo groupadd tech
MutaÈ›i group owner-ul pentru toate fiÈ™ierele din directorul /developers si /testers la grupul â€œtechâ€.
sudo chown -R :tech /developers/
sudo chown -R :tech /testers/
Stergeti grupurile developers si testers.
sudo groupdel developer
sudo groupdel tester
Verificati ca Ã®ncÄƒ mai puteÈ›i edita/rula scripturile cu userul charlie.
su - charlie
/developers/script.sh

Exercitiul 2: Pipelines si Fluxuri de date
RezolvaÈ›i urmÄƒtoarele cerinÈ›e folosind operatorul pipe |. 

Cerinta 1: GÄƒseÈ™te toate liniile de log de sistem care contin cuvantul error, indiferent de majuscule. 
Hint: Vezi  /var/log/syslog
cat /var/log/syslog | grep  -i error

Cerinta 2: GÄƒseÈ™te utilizatorii care au setat ca default shell /bin/bash. CÃ¢È›i utilizatori nu folosesc acest shell? 
Hint: Lista de utilizatori o gasiti in /etc/passwd
grep -v /bin/bash /etc/passwd | wc -l
Unde -v este reverse search, adica va parcurge tot fisierul dat, dar va afisa doar ce NU se potriveste cu patter-ul cerut, adica cu /bin/bash

Cerinta 3: AfiÈ™aÈ›i primele È™i ultimele 5 comenzi utilizate de voi. 
Hint: history, head, tail
history | head -5
history | tail -5

Cerinta 4. ÃŽncercaÈ›i sÄƒ creaÈ›i un user fara drepturi de sudo. Cum putem sa ignoram erorile de permisiuni 
(a.i. acestea sa nu mai apara in consola 
adduser test 2> /dev/null 
Note: Redirectioneaza stderr spre null 

Cerinta 5: AfiÈ™aÈ›i toate comenzile rulate (cu succes) cu sudo de toti userii.
Hint: /var/log/auth.log
cat /var/log/auth.log | grep "COMMAND="

Cerinta 6: Downloadati fisierul app-1.log folosind comanda wget fisierul:
https://raw.githubusercontent.com/amihai/devops/refs/heads/main/python/log-generator/app-1.log 
ExploraÈ›i puÈ›in continutul fisierului: afisati primele si ultimele 5 linii si cate linii are fiÈ™ierul
cat app-1.log | tail -5

Cerinta 7: Ce useri au erori deoarece le-a expirat tokenul (NU Permission denied).
cat /var/log/auth.log | grep "TS expired"

Cerinta 8 (bonus): Incercati sa extrageti in fisiere txt separate urmatoarele informatii din logurile de mai sus:
Lista cu numele unice ale tuturor userilor ce au avut cel putin o eroare
awk -F'user | ' '/error/ {print $2}' log.txt | sort -u > users_with_errors.txt
-F => Delimitator multiplu
/error/ => selecteaza doar liniile cu erroare
print $2 => printeaza al 2-a camp

Lista de request_id-uri unice.
awk -F'request_id | ' '{print $2}' /var/log/auth.log | sort -u > request_ids.txt

Ce request_id-uri nu au nicio eroare 
awk -F'request_id | ' '/error/ {print $2}' /var/log/auth.log | sort -u > error_request_ids.txt

grep -Fvxf request_ids.txt error_request_ids.txt > no_errors.txt
Hint: incercati sa folositi comenzile: awk, sort, uniq 

Exercitiul 3: Procese

Cerinta 1: Porniti un process ce ruleaza comanda sleep Infinity intr-un terminal. DeschideÈ›i alt terminal È™i terminati cu eliberare de resurse procesul (graceful).




Cerinta 2: Downloadati urmÄƒtorul script folosind comanda wget:
 https://raw.githubusercontent.com/amihai/devops/refs/heads/main/linux/die-hard.sh
Da-ti permisiuni de execuÈ›ie pe el si rulati-l.
Omorati programul. ðŸ™‚




Cerinta 3: Deschideti un tab de firefox. CÄƒutaÈ›i procesul si terminati-l.




Cerinta 4: Care sunt PID-urile primele 5 programe ca utilizare de CPU. Dar ca memorie RAM. 
Hint: Puteti utiliza comanda top sau ps cu sort dupa memorie.




Cerinta 5: Cate procese are pornite userul curent? Dar root?




Cerinta 6: Downloadati scriptul urmÄƒtor si dati-i permisiuni de execuÈ›ie:
https://raw.githubusercontent.com/amihai/devops/refs/heads/main/linux/run-forever.sh
Rulati scriptul in background in asa fel incat daca se inchide terminalul sa nu se omoare si scriptul. Redirectati outputul scriptului catre un fisier de log cu numele run-forever.log
Omorati terminalul si verificati ca scriptul Ã®ncÄƒ ruleazÄƒ folosind comanda ps si folosind tail -f pe fisierul de loguri.
Omorati scriptul si verificati ca a fost oprit.



